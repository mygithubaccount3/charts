(this.webpackJsonpcharts=this.webpackJsonpcharts||[]).push([[0],{24:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),c=a.n(l),o=(a(29),a(3)),s=a.n(o),i=a(7),u=a(9),m=a(10),d=a.n(m),g=a(13),p=a(1);var h=function(){function e(){return(e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={id:null,firstName:t.target.firstName.value,lastName:t.target.lastName.value,email:t.target.email.value,pass:t.target.pass.value},e.next=4,fetch("http://localhost:8083/signUp",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a)}).then((function(e){return console.log(e.json())}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{style:{textAlign:"center"}},"Sign Up"),r.a.createElement("form",{id:"regForm",onSubmit:function(t){return e.apply(this,arguments)}},r.a.createElement("label",null,"First Name: ",r.a.createElement("input",{type:"text",name:"firstName",placeholder:"Enter first name"})),r.a.createElement("label",null,"Last Name: ",r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Enter last name"})),r.a.createElement("label",null,"Email: ",r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter email"})),r.a.createElement("label",null,"Password: ",r.a.createElement("input",{type:"password",name:"pass",placeholder:"Enter password"})),r.a.createElement("button",{type:"submit"},"Sign Up"),r.a.createElement(g.b,{to:"/"},"Sign In")))};var f=function(e){var t=e.signIn;return r.a.createElement(g.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/reg"},r.a.createElement(h,null)),r.a.createElement(p.a,{path:"/"},r.a.createElement(n.Fragment,null,r.a.createElement("h1",{style:{textAlign:"center"}},"Sign In"),r.a.createElement("form",{id:"authForm",onSubmit:t},r.a.createElement("label",null,"Email: ",r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter email"})),r.a.createElement("label",null,"Password: ",r.a.createElement("input",{type:"password",name:"pass",placeholder:"Enter password"})),r.a.createElement(g.b,{to:"/reg"},"Sign Up"),r.a.createElement("button",{type:"submit"},"Sign In"))))))},E=a(23),y=a(37);function b(e,t){return Math.round((t-e)/864e5)}var D=function(e){var t=e.handler,a=e.setTaskMinStartDate,n=e.setSelectElements;return r.a.createElement("form",{onSubmit:t,id:"newTaskForm",className:"addTaskForm"},r.a.createElement("label",null,"Project:",r.a.createElement("select",{id:"taskProject",name:"taskProject",onChange:a},n())),r.a.createElement("label",null,"Name: ",r.a.createElement("input",{type:"text",id:"taskName",name:"name"})),r.a.createElement("label",null,"Start: ",r.a.createElement("input",{type:"date",id:"taskStart",name:"start"})),r.a.createElement("label",null,"End: ",r.a.createElement("input",{type:"date",id:"taskEnd",name:"end"})),r.a.createElement("label",null,"Proggres, %: ",r.a.createElement("input",{type:"number",id:"taskProgress",name:"taskProgress"})),r.a.createElement("button",{type:"submit"},"Add"))};var v=function(e){var t=e.handler;return r.a.createElement("form",{onSubmit:t,id:"newProjectForm"},r.a.createElement("label",null,"Name: ",r.a.createElement("input",{type:"text",name:"projectName"})),r.a.createElement("label",null,"Manager: ",r.a.createElement("input",{type:"text",name:"projectManager"})),r.a.createElement("label",null,"Start Date: ",r.a.createElement("input",{type:"date",name:"projectStartDate",min:"".concat((new Date).getFullYear(),"-").concat((new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1,"-").concat((new Date).getDate()<10?"0"+(new Date).getDate():(new Date).getDate())})),r.a.createElement("label",null,"Comment: ",r.a.createElement("input",{type:"text",name:"projectComment"})),r.a.createElement("button",{type:"submit"},"Add"))};var k=function(e){var t=e.el,a=e.days,l=e.dayWidth,c=e.isOnMobile;return Object(n.useEffect)((function(){function e(e){if(e.matches){var t=11/a+Number(l.slice(0,l.length-1))+"%";document.getElementById("months").style.gridTemplateColumns="repeat(".concat(a,", ").concat(t,")"),document.getElementById("blankCell").style.display="none"}else document.getElementById("months").style.gridTemplateColumns="11% repeat(".concat(a,", ").concat(l,")"),document.getElementById("blankCell").style.display="block"}return e(c),c.addListener(e),function(){c.removeListener(e)}}),[c,l,a]),r.a.createElement("div",{id:"months"},r.a.createElement("div",{id:"blankCell"}),t)};var M=function(e){var t=e.since,a=e.until,n=e.sendValue;return r.a.createElement("div",{id:"period"},r.a.createElement("label",{htmlFor:"startDate"},"Since:"),r.a.createElement("input",{type:"date",id:"startDate",name:"startDate",value:t,onChange:n}),r.a.createElement("label",{htmlFor:"endDate"},"Until:"),r.a.createElement("input",{type:"date",id:"endDate",name:"endDate",value:a,onChange:n}))};var j=function(e){var t,a=e.dayWidth,l=e.days,c=e.dateStart,o=e.dateEnd,s=e.name,i=e.start,u=e.end,m=e.isOnMobile,d=e.projId,g=e.taskId,p=(e.userEmail,e.userToken,e.deleteTask),h=["#dfceff","#c4dcff","#fec4ff","#c4f4ff","#c8ffc4","#ffc4c4","#304c8029","#8a5858b0","#10bdb5b0"],f=0,E=0;function D(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])}if(D(i)<D(c))if(D(u)<D(c))t="none";else if(D(u)>=D(c)&&D(u)<=D(o)){E=(f=2)+(1+b(D(c),D(u))),t="block"}else D(u)>D(o)&&(f=2,E=l,t="block");else D(i)>=D(c)&&D(i)<=D(o)?(f=b(D(c),D(i))+2,D(u)<=D(o)?(E=f+b(D(i),D(u)),t="block"):D(u)>D(o)&&(E=l,t="block")):D(i)>D(o)&&(t="none");return Object(n.useEffect)((function(){function e(e){var t=document.getElementsByClassName("task"),n=document.getElementsByClassName("task__chart");if(e.matches)for(var r=11/l+Number(a.slice(0,a.length-1))+"%",c=0;c<t.length;c++)t[c].children[0].style.display="none",t[c].setAttribute("style","grid-template-columns: repeat(".concat(l,", ").concat(r,");margin-top: 11px;margin-bottom: 11px")),n[c].style.backgroundColor="white",n[c].style.border="2px solid ".concat(h[Math.floor(10*Math.random())]),n[c].innerHTML=s;else for(var o=0;o<t.length;o++)t[o].children[0].style.display="block",t[o].setAttribute("style","grid-template-columns: 11% repeat(".concat(l,", ").concat(a,")")),n[o].style.backgroundColor=h[Math.floor(10*Math.random())],n[o].style.border=0,n[o].innerHTML=""}return e(m),m.addListener(e),function(){m.removeListener(e)}}),[m,a,l]),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"task",id:Object(y.a)()},r.a.createElement("div",{className:"task__info"},r.a.createElement("div",{className:"task__name"},s),r.a.createElement("div",{className:"task__duration"},b(D(i),D(u))," day(s)"),r.a.createElement("span",{className:"task__start"},i)," - ",r.a.createElement("span",{className:"taskInfo__end"},u),r.a.createElement("button",null,"Edit"),r.a.createElement("button",{onClick:p(g,d)},"Delete")),r.a.createElement("div",{className:"task__chart",style:{gridArea:"1/".concat(f,"/2/").concat(E),display:t,backgroundColor:"".concat(h[Math.floor(10*Math.random())])}})))};var w=function(e){var t=e.dayWidth,a=e.days,n=e.dateStart,l=e.dateEnd,c=e.data,o=e.isOnMobile,s=e.userEmail,i=e.userToken,u=e.deleteTask,m=[];return c.forEach((function(e,c,d){e.taskList.forEach((function(c){var d=new Date(c.startDate),g=new Date(c.endDate);console.log(c.startDate),console.log(c.endDate),console.log(c),m.push(r.a.createElement(j,{dateStart:n,dateEnd:l,name:c.name,start:"".concat(d.getFullYear(),"-").concat(d.getMonth()<10?"0"+d.getMonth():d.getMonth(),"-").concat(d.getDate()<10?"0"+d.getDate():d.getDate()),end:"".concat(g.getFullYear(),"-").concat(g.getMonth()<10?"0"+g.getMonth():g.getMonth(),"-").concat(g.getDate()<10?"0"+g.getDate():g.getDate()),key:Object(y.a)(),days:a,dayWidth:t,isOnMobile:o,projId:e.id,taskId:c.id,userEmail:s,userToken:i,deleteTask:u}))}))})),console.log(m),r.a.createElement("div",{id:"content"},m)};var N=function(e){var t=e.userEmail,a=e.userToken,l=new Date,c=Object(n.useState)("".concat(l.getFullYear(),"-").concat(l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1,"-").concat(l.getDate()<10?"0"+l.getDate():l.getDate())),o=Object(u.a)(c,2),m=o[0],d=o[1];l.setMonth(l.getMonth()+6);var g,p=Object(n.useState)("".concat(l.getFullYear(),"-").concat(l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1,"-").concat(l.getDate()<10?"0"+l.getDate():l.getDate())),h=Object(u.a)(p,2),f=h[0],j=h[1],N=Object(n.useState)([]),O=Object(u.a)(N,2),x=O[0],S=O[1],F=Object(n.useState)([]),I=Object(u.a)(F,2),T=I[0],B=I[1],C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],A=window.matchMedia("(max-width: 767px)");function P(e){e.matches?document.getElementById("period").style.width="80%":document.getElementById("period").style.width="40%"}var Y=function(){var e=Object(i.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8083/project/all",{credentials:"include",headers:{email:t,token:a}});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,console.log(r[0]),z(r)();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Y(),P(A),A.addListener(P);var e=new Date;return document.getElementById("startDate").setAttribute("min","".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,"-").concat(e.getDate()<10?"0"+e.getDate():e.getDate())),e.setFullYear(e.getFullYear()+1),document.getElementById("startDate").setAttribute("max","".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,"-").concat(e.getDate()<10?"0"+e.getDate():e.getDate())),(e=new Date(m)).setDate(e.getDate()+1),document.getElementById("endDate").setAttribute("min","".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,"-").concat(e.getDate()<10?"0"+e.getDate():e.getDate())),e.setDate(e.getDate()-1),e.setMonth(e.getMonth()+6),document.getElementById("endDate").setAttribute("max","".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,"-").concat(e.getDate()<10?"0"+e.getDate():e.getDate())),function(){A.removeListener(P)}}),[]),g=b(new Date(m),new Date(f));for(var _=function(e,t){var a;return a=12*(t.getFullYear()-e.getFullYear()),a-=e.getMonth()+1,(a+=t.getMonth())<=0?0:a+1}(new Date(m),new Date(f)),L=[],J=2,W=89/g+"%",U=new Date(m),H=0;H<=_;++H)0===H?(L.push(r.a.createElement("span",{key:Object(y.a)(),style:{gridArea:"1/".concat(J,"/2/").concat(J+(new Date(Number(m.slice(0,4)),Number(m.slice(5,7)),0).getDate()-Number(m.slice(8))))}},C[U.getMonth()])),J+=new Date(Number(m.slice(0,4)),Number(m.slice(5,7)),0).getDate()-Number(m.slice(8)),U.setMonth(U.getMonth()+1)):H<=_-1?(L.push(r.a.createElement("span",{key:Object(y.a)(),style:{gridArea:"1/".concat(J,"/2/").concat(J+new Date(Number(m.slice(0,4)),Number(m.slice(5,7))-1+H,0).getDate())}},C[U.getMonth()])),J+=new Date(Number(m.slice(0,4)),Number(m.slice(5,7))-1+H,0).getDate(),U.setMonth(U.getMonth()+1)):L.push(r.a.createElement("span",{key:Object(y.a)(),style:{gridArea:"1/".concat(J,"/2/").concat(J+Number(f.slice(8)))}},C[Number(f.slice(5,7))-1]));function V(){return(V=Object(i.a)(s.a.mark((function e(n){var r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch("http://localhost:8083/project/createTask",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",projectId:n.target.taskProject.value,email:t,token:a},body:JSON.stringify({id:Object(y.a)(),name:n.target.name.value,duration:2,startDate:n.target.start.value,endDate:n.target.end.value,progress:n.target.taskProgress.value,parentId:null,child:null,userModelFull:null})});case 3:return e.next=5,fetch("http://localhost:8083/project/all",{credentials:"include",headers:{email:t,token:a}});case 5:return r=e.sent,e.next=8,r.json();case 8:l=e.sent,S(l),K();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(i.a)(s.a.mark((function e(n){var r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch("http://localhost:8083/project/create",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",email:t,token:a},body:JSON.stringify({id:Object(y.a)(),name:n.target.projectName.value,startDate:n.target.projectStartDate.value,comment:n.target.projectComment.value,taskList:[]})});case 3:return e.next=5,fetch("http://localhost:8083/project/all",{credentials:"include",headers:{email:t,token:a}});case 5:return r=e.sent,e.next=8,r.json();case 8:l=e.sent,S(l),K();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return function(t){if("undefined"===typeof t)S(e),B(e);else{var a=e.filter((function(e){return e.name===t.target.value}));0===a.length?B(e):B(a)}}}function G(e){switch(e.target.id){case"openNewTaskFormButton":var t=new Date(x.find((function(e){return e.id===document.getElementById("taskProject").value})).startDate);document.getElementById("newTaskForm").start.setAttribute("min","".concat(t.getFullYear(),"-").concat(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,"-").concat(t.getDate()<10?"0"+t.getDate():t.getDate())),document.getElementById("overlay").style.display="block",document.getElementById("newTaskForm").style.display="flex";break;case"openNewProjectFormButton":document.getElementById("overlay").style.display="block",document.getElementById("newProjectForm").style.display="flex"}}function K(){Object(E.a)(document.getElementsByTagName("form")).forEach((function(e){e.style.display="none"})),document.getElementById("overlay").style.display="none"}return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"overlay",onClick:K}),r.a.createElement(D,{handler:function(e){return V.apply(this,arguments)},setTaskMinStartDate:function(){var e=new Date(x.find((function(e){return e.id===document.getElementById("taskProject").value})).startDate);document.getElementById("newTaskForm").start.setAttribute("min","".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,"-").concat(e.getDate()<10?"0"+e.getDate():e.getDate()))},setSelectElements:function(){return x.map((function(e){return r.a.createElement("option",{key:Object(y.a)(),value:e.id},e.name)}))}}),r.a.createElement(v,{handler:function(e){return q.apply(this,arguments)}}),r.a.createElement(M,{since:m,until:f,sendValue:function(e){if("startDate"===e.target.id?d(e.target.value):j(e.target.value),"startDate"===e.target.id){var t=new Date(e.target.value);t.setDate(t.getDate()+1),document.getElementById("endDate").setAttribute("min","".concat(t.getFullYear(),"-").concat(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,"-").concat(t.getDate()<10?"0"+t.getDate():t.getDate())),t.setDate(t.getDate()-1),t.setMonth(t.getMonth()+6),document.getElementById("endDate").setAttribute("max","".concat(t.getFullYear(),"-").concat(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,"-").concat(t.getDate()<10?"0"+t.getDate():t.getDate())),j(document.getElementById("endDate").getAttribute("max"))}}}),r.a.createElement("label",null,"Select project:",r.a.createElement("select",{onChange:z(x),style:{marginLeft:"20px"}},r.a.createElement("option",{value:"all"},"All projects"),x.map((function(e){return r.a.createElement("option",null,e.name)})))),r.a.createElement("button",{id:"openNewTaskFormButton",onClick:G},"New task"),r.a.createElement("button",{id:"openNewProjectFormButton",onClick:G},"New project"),r.a.createElement("div",{id:"chart"},r.a.createElement(k,{el:L,days:g,dayWidth:W,isOnMobile:A}),r.a.createElement(w,{dayWidth:W,days:g,dateStart:m,dateEnd:f,data:T,isOnMobile:A,userEmail:t,userToken:a,deleteTask:function(e,n){return function(){var r=Object(i.a)(s.a.mark((function r(l){var c,o;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l.preventDefault(),r.next=3,fetch("http://localhost:8083/project/deleteTask",{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json",taskId:e,projectId:n,email:t,token:a}});case 3:return r.next=5,fetch("http://localhost:8083/project/all",{credentials:"include",headers:{email:t,token:a}});case 5:return c=r.sent,r.next=8,c.json();case 8:o=r.sent,S(o);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})))};var O=function(){var e=Object(n.useState)(!!d.a.get("email")),t=Object(u.a)(e,2),a=t[0],l=t[1];function c(){return(c=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("http://localhost:8083/signIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.target.email.value,pass:t.target.pass.value})}).then((function(e){return e.json()})).then((function(e){d.a.set("id",e.cookie.value),d.a.set("email",e.email),l(!0)})).catch((function(){}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a?r.a.createElement(N,{userEmail:d.a.get("email"),userToken:d.a.get("id")}):r.a.createElement(f,{signIn:function(e){return c.apply(this,arguments)}})};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.24a7d85a.chunk.js.map